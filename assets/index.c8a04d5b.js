import{b as P,f as u,a as B,t as D,c as k}from"./index.07f4d7e6.js";import{_ as R,u as N,T as f,r as E,o as _,c as v,a as e,t as i,b as T,d as S,w as y,e as I,f as M,v as V,p as q,g as H,F as W,h as G,i as J,j as K,k as x}from"./index.01ee887f.js";import{g as C,n as Q,S as X,a as Y}from"./swiper.min.347d8877.js";function Z(t){let{swiper:s,extendParams:b,on:h,emit:a}=t,n;s.autoplay={running:!1,paused:!1},b({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function d(){const r=s.slides.eq(s.activeIndex);let m=s.params.autoplay.delay;r.attr("data-swiper-autoplay")&&(m=r.attr("data-swiper-autoplay")||s.params.autoplay.delay),clearTimeout(n),n=Q(()=>{let c;s.params.autoplay.reverseDirection?s.params.loop?(s.loopFix(),c=s.slidePrev(s.params.speed,!0,!0),a("autoplay")):s.isBeginning?s.params.autoplay.stopOnLastSlide?p():(c=s.slideTo(s.slides.length-1,s.params.speed,!0,!0),a("autoplay")):(c=s.slidePrev(s.params.speed,!0,!0),a("autoplay")):s.params.loop?(s.loopFix(),c=s.slideNext(s.params.speed,!0,!0),a("autoplay")):s.isEnd?s.params.autoplay.stopOnLastSlide?p():(c=s.slideTo(0,s.params.speed,!0,!0),a("autoplay")):(c=s.slideNext(s.params.speed,!0,!0),a("autoplay")),(s.params.cssMode&&s.autoplay.running||c===!1)&&d()},m)}function g(){return typeof n!="undefined"||s.autoplay.running?!1:(s.autoplay.running=!0,a("autoplayStart"),d(),!0)}function p(){return!s.autoplay.running||typeof n=="undefined"?!1:(n&&(clearTimeout(n),n=void 0),s.autoplay.running=!1,a("autoplayStop"),!0)}function o(r){!s.autoplay.running||s.autoplay.paused||(n&&clearTimeout(n),s.autoplay.paused=!0,r===0||!s.params.autoplay.waitForTransition?(s.autoplay.paused=!1,d()):["transitionend","webkitTransitionEnd"].forEach(m=>{s.$wrapperEl[0].addEventListener(m,w)}))}function A(){const r=C();r.visibilityState==="hidden"&&s.autoplay.running&&o(),r.visibilityState==="visible"&&s.autoplay.paused&&(d(),s.autoplay.paused=!1)}function w(r){!s||s.destroyed||!s.$wrapperEl||r.target===s.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(m=>{s.$wrapperEl[0].removeEventListener(m,w)}),s.autoplay.paused=!1,s.autoplay.running?d():p())}function L(){s.params.autoplay.disableOnInteraction?p():(a("autoplayPause"),o()),["transitionend","webkitTransitionEnd"].forEach(r=>{s.$wrapperEl[0].removeEventListener(r,w)})}function O(){s.params.autoplay.disableOnInteraction||(s.autoplay.paused=!1,a("autoplayResume"),d())}function j(){s.params.autoplay.pauseOnMouseEnter&&(s.$el.on("mouseenter",L),s.$el.on("mouseleave",O))}function z(){s.$el.off("mouseenter",L),s.$el.off("mouseleave",O)}h("init",()=>{s.params.autoplay.enabled&&(g(),C().addEventListener("visibilitychange",A),j())}),h("beforeTransitionStart",(r,m,c)=>{s.autoplay.running&&(c||!s.params.autoplay.disableOnInteraction?s.autoplay.pause(m):p())}),h("sliderFirstMove",()=>{s.autoplay.running&&(s.params.autoplay.disableOnInteraction?p():o())}),h("touchEnd",()=>{s.params.cssMode&&s.autoplay.paused&&!s.params.autoplay.disableOnInteraction&&d()}),h("destroy",()=>{z(),s.autoplay.running&&p(),C().removeEventListener("visibilitychange",A)}),Object.assign(s.autoplay,{pause:o,run:d,start:g,stop:p})}var F="/images/en.png",U="/images/zh.png",$="/images/homebg.gif",ee="/images/front.png",se="/images/bao_block.png",te="/images/zuzhi.png";const ae={components:{Swiper:X,SwiperSlide:Y},setup(){const{locale:t}=N();return{locale:t}},data(){return{lang:"zh",provider:null,betUI:!1,betResult:!1,banner:["/images/ban11.jpg","/images/ban21.jpg","/images/ban31.jpg"],modules:[Z],contracts:{coin:"",defi:""},game:{min:1,max:1e3,rate:1,lucky:10,decimals:6,pic:"",species:"",hash:"",code:""},refer:"0x80De1D41C8d412A4C0e9Df9920DC318A267cDA1c",wallet:{address:"",approved:0},user:{},form:{amount:1,boxes:0,to:"",rank:0,luckyPercent:40},lottery:{},site:{burnTokens:0,machinePowerPercent:1}}},watch:{"wallet.address"(){this.contracts.coin=P(this.provider.eth.Contract,"coin"),this.contracts.defi=P(this.provider.eth.Contract,"defi"),this.updateInfo(),this.updateContractInfo()}},mounted(){let t=50,s=this;setTimeout(function b(){if(!window.ethereum)return--t>0?setTimeout(b,100):null;s.provider=new Web3(window.ethereum),ethereum.request({method:"eth_requestAccounts"}).then(h=>{let a=s.$route.query.a;a&&a.length==42&&(console.log("set refer to: ",a),s.refer=a),s.wallet.address=h[0]})},100),this.pick()},methods:{safe(t){return this.provider&&this.contracts.defi!=""?t:"-"},updateInfo(){this.contracts.coin.methods.balanceOf(this.wallet.address).call().then(t=>{this.wallet.balance=u(this.provider.utils,t)}),this.contracts.coin.methods.allowance(this.wallet.address,B.defi).call().then(t=>{console.log("approved:",t),this.wallet.approved=t>this.game.min}),this.contracts.defi.methods.user(this.wallet.address).call().then(t=>{console.log(t),this.lottery={amount:t.last.amount,flag:t.last.flag,rate:t.last.rate},this.user={refer:t.refer,members:t.members,rank:t.rank,shares:t.shares,times:t.times,won:t.won,withdrawTime:t.withdrawTime},this.user.cost=u(this.provider.utils,t.cost),this.user.balance=u(this.provider.utils,t.balance),this.user.business=u(this.provider.utils,t.business),this.user.machines=u(this.provider.utils,t.machines),this.user.capacity=u(this.provider.utils,t.capacity),this.user.shareTokens=u(this.provider.utils,t.shareTokens),this.user.rankTokens=u(this.provider.utils,t.rankTokens),this.user.mineTokens=u(this.provider.utils,t.mineTokens),this.user.lotteryTokens=u(this.provider.utils,t.lotteryTokens),this.user.withdraw=u(this.provider.utils,t.withdraw),this.lottery.amount=u(this.provider.utils,this.lottery.amount),t.machines>0&&(this.user.machinesPower=parseFloat((new Date().getTime()/1e3-t.withdrawTime)/86400*this.user.machines*this.site.machinePowerPercent/1e3).toFixed(4),console.log("machine power:",this.user.machinesPower),this.user.balance+=Math.floor(this.user.machinesPower))}).catch(t=>{console.error("defi user ",t)})},updateContractInfo(){this.contracts.defi.methods.info().call().then(t=>{console.log("site info :",t),this.site.machinePowerPercent=t[0],this.site.burnTokens=u(this.provider.utils,t[2])})},bet(){if(this.form.amount>this.wallet.balance){f.fail("\u94B1\u5305\u4F59\u989D\u4E0D\u8DB3");return}if(this.form.amount<this.game.min){f.fail("\u6295\u6CE8\u91D1\u989D\u4E0D\u5C11\u4E8E"+this.game.min);return}if(this.form.amount>this.game.max){f.fail("\u6295\u6CE8\u91D1\u989D\u4E0D\u8D85\u8FC7"+this.game.max);return}f.loading({forbidClick:!0,message:"\u6B63\u5728\u5904\u7406"}),this.contracts.defi.methods.bet(this.refer,D(this.provider.utils,this.form.amount),this.form.boxes).send({from:this.wallet.address}).then(t=>{console.log(t),this.game.hash=t.blockHash,this.game.code=t.blockHash[t.blockHash.length-1];const s=parseInt(this.game.code,16);this.game.pic=`/images/${s}.png`,this.game.species=k.species[s],this.updateInfo(),f.clear(),this.betUI=!1,this.betResult=!0}).catch(t=>{console.error(t),f.clear()})},approve(){this.contracts.coin.methods.approve(B.defi,D(this.provider.utils,"990000000000000000000")).send({from:this.wallet.address}).then(t=>{this.updateInfo()})},withdraw(){this.contracts.defi.methods.withdraw().send({from:this.wallet.address}).then(t=>{console.log("withdrawn ",t),this.updateInfo()})},add(){this.form.amount>=this.game.max||(this.form.amount*=2)},sub(){this.form.amount<=this.game.min||(this.form.amount/=2)},max(){this.wallet.balance>=this.game.max?this.form.amount=this.game.max:this.form.amount=this.wallet.balance},pick(t){this.form.boxes++,this.form.boxes=this.form.boxes%16,this.game.rate=k.rates[this.form.boxes-1][0]/100,this.game.lucky=k.rates[this.form.boxes-1][1]},openBox(){console.log(this.form.boxes),this.$router.push({name:"box",query:{hash:this.game.code,boxes:this.form.boxes}})},copyShareLink(){this.$copyText(`${window.location.origin}/#/?a=${this.wallet.address}`).then(function(t){f.success("\u62F7\u8D1D\u6210\u529F")},function(t){f.fail("\u62F7\u8D1D\u5931\u8D25")})},clickLang(t){this.lang=t,this.locale=t}}},l=t=>(q("data-v-0822823f"),t=t(),H(),t),ie={class:""},ne={class:"header"},oe={class:"header__wrap"},le={class:"header__left"},re={class:"header__label"},ue={class:"header__value lang"},de={key:0,class:"lang_value"},pe=l(()=>e("img",{src:F},null,-1)),ce=l(()=>e("span",null,"English",-1)),he=[pe,ce],me={key:1,class:"lang_value"},fe=l(()=>e("img",{src:U},null,-1)),_e=l(()=>e("span",null,"\u4E2D\u56FD",-1)),ve=[fe,_e],be={href:"javascript:void(false)"},ge=l(()=>e("img",{src:F},null,-1)),ye=x(" English"),we=[ge,ye],ke={href:"javascript:void(false)"},Ee=l(()=>e("img",{src:U},null,-1)),Te=x(" \u4E2D\u56FD"),Se=[Ee,Te],Ie={class:"long longbefore"},Ce={class:"home-box"},xe={class:"prizeList"},Ae=["src"],Le=l(()=>e("div",{class:"drawimg"},[e("img",{src:$,class:"flash"}),e("img",{src:ee,class:"sea"})],-1)),Oe={class:"abc"},Pe={class:"section"},Be={class:"container"},De={class:"statistics"},Me={class:"panel-info"},Fe={class:"boderboot"},Ue=l(()=>e("img",{src:se,alt:""},null,-1)),je={class:"panel-info-item"},ze={class:"ether-value"},Re={class:"panel-info-item"},Ne={class:"ether-value"},Ve={class:"panel-info-item"},qe={class:"ether-value"},He={class:"panel-info-item"},We={class:"ether-value"},Ge={class:"panel-info-item"},Je={class:"ether-value"},Ke={class:"panel-info-item"},Qe={class:"ether-value"},Xe={class:"panel-info-item"},Ye={class:"ether-value"},Ze={class:"panel-info-item"},$e={class:"ether-value"},es={class:"panel-info-item"},ss={class:"ether-value"},ts={class:"panel-info-item"},as={class:"ether-value"},is={class:"panel-info-item"},ns={class:"ether-value"},os={class:"panel-info-item"},ls=l(()=>e("span",null,null,-1)),rs=["disabled"],us={class:"panel-info"},ds=l(()=>e("img",{src:te,alt:""},null,-1)),ps={class:"body"},cs={class:"panel-info-item"},hs={class:"ether-value"},ms={class:"panel-info-item"},fs={class:"ether-value"},_s={class:"panel-info-item"},vs={class:"ether-value"},bs={class:"panel-info-item"},gs={class:"ether-value"},ys={class:"panel-info-item"},ws={class:"ether-value"},ks={class:"panel-info-item"},Es={class:"ether-value"},Ts={class:"panel-info-item"},Ss={class:"ether-value"},Is={class:"panel-info-item"},Cs={key:0,class:"btn"},xs={class:"betBotm"},As=l(()=>e("div",{class:"bet-font"},"\u6295\u6CE8\u91D1\u984D",-1)),Ls={class:"int-box"},Os=l(()=>e("div",{class:"god-bi"},"SEA",-1)),Ps={class:"btnlist"},Bs={class:"betInfo"},Ds=x(" \u53C3\u8003\u50F9\u683C\uFF1A "),Ms={class:"font14"},Fs={class:"font14"},Us={class:"font14"},js={class:"font14"},zs={class:"openBtn clickableButton"},Rs={class:"resultbox"},Ns=l(()=>e("div",{class:"reuslt-title"},"\u76EE\u6A19\u5C0D\u8C61",-1)),Vs={class:"number-box"},qs=["src"],Hs=l(()=>e("div",{class:"reuslt-title"},"\u54C8\u5E0C\u5C3E\u6578",-1)),Ws={class:"number-box"},Gs=l(()=>e("div",{class:"reuslt-title"},"\u4EA4\u6613\u54C8\u5E0C\u5730\u5740",-1)),Js={class:"number-box"};function Ks(t,s,b,h,a,n){const d=E("swiper-slide"),g=E("swiper"),p=E("van-popup");return _(),v("div",ie,[e("div",ne,[e("div",oe,[e("div",le,[e("div",re,i(t.$t("app.label1")),1),e("div",ue,[a.lang=="en"?(_(),v("div",de,he)):T("",!0),a.lang=="zh"?(_(),v("div",me,ve)):T("",!0),e("ul",null,[e("a",be,[e("li",{onClick:s[0]||(s[0]=o=>n.clickLang("en"))},we)]),e("a",ke,[e("li",{onClick:s[1]||(s[1]=o=>n.clickLang("zh"))},Se)])])])])])]),e("div",Ie,[e("div",Ce,[e("div",xe,[S(g,{modules:a.modules,autoplay:{delay:2500,disableOnInteraction:!1},"slides-per-view":1},{default:y(()=>[(_(!0),v(W,null,G(a.banner,o=>(_(),J(d,{key:o},{default:y(()=>[e("img",{src:o,class:"banner"},null,8,Ae)]),_:2},1024))),128))]),_:1},8,["modules"])]),Le,a.wallet.approved?(_(),v("div",{key:1,class:"longBtn",onClick:[s[4]||(s[4]=o=>a.betUI=!0),s[5]||(s[5]=I(()=>{},["stop"]))]},i(t.$t("app.label50")),1)):(_(),v("div",{key:0,class:"longBtn",onClick:[s[2]||(s[2]=(...o)=>n.approve&&n.approve(...o)),s[3]||(s[3]=I(()=>{},["stop"]))]},i(t.$t("app.label51")),1)),e("h4",Oe,i(t.$t("app.label54"))+": "+i(n.safe(a.wallet.balance))+" SEA",1)]),e("section",Pe,[e("div",Be,[e("h2",De,i(t.$t("app.label30")),1),e("div",Me,[e("h3",Fe,[Ue,e("span",null,i(t.$t("app.label9")),1)]),e("div",null,[e("div",je,[e("span",null,i(t.$t("app.label1911")),1),e("span",ze,i(n.safe(a.site.burnTokens))+" SEA",1)]),e("div",Re,[e("span",null,i(t.$t("app.label193")),1),e("span",Ne,i(n.safe(a.user.cost))+" SEA",1)]),e("div",Ve,[e("span",null,i(t.$t("app.label191")),1),e("span",qe,i(n.safe(a.user.machines))+" SEa",1)]),e("div",He,[e("span",null,i(t.$t("app.label192")),1),e("span",We,i(n.safe(a.user.capacity))+" SEA",1)]),e("div",Ge,[e("span",null,i(t.$t("app.label201")),1),e("span",Je,i(n.safe(a.user.shareTokens))+" SEA",1)]),e("div",Ke,[e("span",null,i(t.$t("app.label21")),1),e("span",Qe,i(n.safe(a.user.mineTokens))+" SEA",1)]),e("div",Xe,[e("span",null,i(t.$t("app.label20")),1),e("span",Ye,i(n.safe(a.user.machinesPower))+" SEA",1)]),e("div",Ze,[e("span",null,i(t.$t("app.label221")),1),e("span",$e,i(n.safe(a.lottery&&a.lottery.flag?a.lottery.amount*a.lottery.rate/100:"-"))+" SEA",1)]),e("div",es,[e("span",null,i(t.$t("app.label231")),1),e("span",ss,i(n.safe(a.user.lotteryTokens))+" SEA",1)]),e("div",ts,[e("span",null,i(t.$t("app.label24")),1),e("span",as,i(n.safe(a.user.withdraw))+" SEA",1)]),e("div",is,[e("span",null,i(t.$t("app.label25")),1),e("span",ns,i(n.safe(parseFloat(a.user.balance).toFixed(2)))+" SEA",1)]),e("div",os,[ls,e("a",{class:"btn withdraw",onClick:s[6]||(s[6]=(...o)=>n.withdraw&&n.withdraw(...o)),disabled:a.user.balance<=1},i(t.$t("app.label29")),9,rs)])])]),e("div",us,[e("h3",null,[ds,e("span",null,i(t.$t("app.label33")),1)]),e("div",ps,[e("div",cs,[e("span",null,i(t.$t("app.label17")),1),e("span",hs,i(a.user.refer?a.user.refer.substr(0,8)=="0x000000"?"-":[a.user.refer.substr(0,4),"****",a.user.refer.substr(-5,5)].join(""):"-"),1)]),e("div",ms,[e("span",null,i(t.$t("app.label344")),1),e("span",fs,i(n.safe(a.user.rank)),1)]),e("div",_s,[e("span",null,i(t.$t("app.label36")),1),e("span",vs,i(n.safe(a.user.shares)),1)]),e("div",bs,[e("span",null,i(t.$t("app.label37")),1),e("span",gs,i(n.safe(a.user.groups)),1)]),e("div",ys,[e("span",null,i(t.$t("app.label22")),1),e("span",ws,i(n.safe(a.user.shareTokens))+" SEA",1)]),e("div",ks,[e("span",null,i(t.$t("app.label23")),1),e("span",Es,i(n.safe(a.user.rankTokens))+" SEA",1)]),e("div",Ts,[e("span",null,i(t.$t("app.label38")),1),e("span",Ss,i(n.safe(a.user.business))+" SEA",1)]),e("div",Is,[e("span",null,i(t.$t("app.label34")),1),a.wallet.address!=""?(_(),v("span",Cs,[e("div",{onClick:s[7]||(s[7]=(...o)=>n.copyShareLink&&n.copyShareLink(...o)),class:"aligncenter copybtn"},i(t.$t("app.label40")),1)])):T("",!0)])])])])]),M(e("div",xs,[S(p,{show:a.betUI,"onUpdate:show":s[15]||(s[15]=o=>a.betUI=o),onClick:s[16]||(s[16]=o=>a.betUI=!1),style:{"background-color":"transparent"}},{default:y(()=>[e("div",{class:"bet-img",onClick:s[14]||(s[14]=I(()=>{},["stop"]))},[As,e("div",Ls,[M(e("input",{type:"number",placeholder:"\u8ACB\u8F38\u5165\u91D1\u984D","onUpdate:modelValue":s[8]||(s[8]=o=>a.form.amount=o)},null,512),[[K,a.form.amount]]),Os]),e("div",Ps,[e("div",{class:"btn-item",onClick:s[9]||(s[9]=(...o)=>n.sub&&n.sub(...o))}," - "),e("div",{class:"btn-item",onClick:s[10]||(s[10]=(...o)=>n.add&&n.add(...o))}," + "),e("div",{class:"btn-item",onClick:s[11]||(s[11]=(...o)=>n.max&&n.max(...o))},"max"),e("div",{class:"btn-item",onClick:s[12]||(s[12]=(...o)=>n.pick&&n.pick(...o))},i(a.form.boxes),1)]),e("div",Bs,[e("div",null,[Ds,e("span",Ms,i(a.form.amount*2.5)+" USDT",1)]),e("div",null,[e("span",Fs,"\u8CFC\u8CB7\u500B\u6578: "+i(a.form.boxes),1),e("span",Us,"\u500D\u6578: "+i(a.game.rate),1),e("span",js,"\u52DD\u7387: "+i(a.game.lucky)+" %",1)])]),e("div",zs,[e("span",{class:"font14",onClick:s[13]||(s[13]=(...o)=>n.bet&&n.bet(...o))},"\u78BA\u5B9A\u8CFC\u8CB7")])])]),_:1},8,["show"])],512),[[V,a.betUI]]),e("div",{onClick:s[19]||(s[19]=o=>a.betResult=!1),class:"Betresult"},[S(p,{show:a.betResult,"onUpdate:show":s[18]||(s[18]=o=>a.betResult=o)},{default:y(()=>[e("div",Rs,[Ns,e("div",Vs,[e("img",{src:a.game.pic},null,8,qs),e("div",null,i(a.game.species),1)]),Hs,e("div",Ws,"\u54C8\u5E0C\u5C3E\u6578\u70BA "+i(a.game.code),1),Gs,e("div",Js,i(a.game.hash),1),e("div",{class:"Openbtn",onClick:s[17]||(s[17]=(...o)=>n.openBox&&n.openBox(...o))},"\u6211\u8981\u62BD\u734E")])]),_:1},8,["show"])])])])}var Zs=R(ae,[["render",Ks],["__scopeId","data-v-0822823f"]]);export{Zs as default};
