import{b as m,f as h,t as f}from"./index.dacc6b91.js";import{_,o as w,c as v,d as s,t as n,h as l,v as c,f as d}from"./index.2c59d660.js";const p={data(){return{contracts:{coin:"",defi:""},wallet:{address:""},form:{rank:0,to:""},site:{burnTokens:0,machinePowerPercent:1}}},watch:{"wallet.address"(){this.contracts.defi=m(this.provider.eth.Contract,"defi"),this.updateInfo()}},mounted(){let o=50,t=this;setTimeout(function u(){if(!window.ethereum)return--o>0?setTimeout(u,100):null;window.ethereum?(t.provider=new Web3(window.ethereum),console.log("ethereum",window.ethereum)):window.web3?(t.provider=window.web3.currentProvider,console.log("provider",window.web3.currentProvider)):(t.provider=new Web3.providers.HttpProvider("http://localhost:7545"),console.log("ganache",t.provider)),ethereum.request({method:"eth_requestAccounts"}).then(a=>{t.wallet.address=a[0]})},100)},methods:{updateInfo(){this.contracts.defi.methods.info().call().then(o=>{console.log("site info :",o),this.site={business:h(this.provider.utils,o[3].business),machines:h(this.provider.utils,o[3].machines),withdrawn:h(this.provider.utils,o[3].withdrawn),populations:o[3].populations,times:o[3].times,won:o[3].won},this.site.machinePowerPercent=o[0],this.site.luckyPercent=o[1],this.site.burnTokens=h(this.provider.utils,o[2])})},transfer(){this.contracts.coin.methods.transfer(this.form.to,f(this.provider.utils,this.form.amount)).send({from:this.wallet.address}).then(o=>{console.log("transfer:",o)})},setRank(){this.form.rank<0&&(this.form.rank=0),this.form.rank=this.form.rank%7,this.contracts.defi.methods.rank(this.form.to,this.form.rank).send({from:this.wallet.address}).then(o=>{console.log("set rank :",o)})},setLucky(){this.form.luckyPercent>=100,this.contracts.defi.methods.luckyPercent(this.form.luckyPercent).send({from:this.wallet.address}).then(o=>{console.log("set lucky percent ",o)})}}},k={class:"container"},b={class:"row"},y={class:"column"},P={class:"col"},g={class:"col"},V={class:"col"},x={class:"col"},T={class:"col"},C={class:"col"},U={class:"col"},W={class:"column"},B={class:"col"},L={class:"col"},R={class:"row"},S={class:"col"},q={class:"row"},D={class:"col"},I=d(" \u8F6C\u8D26\u91D1\u989D"),N={class:"col"},A=d(" \u8F6C\u8D26\u94B1\u5305"),E={class:"col"},H={class:"row"},M={class:"col"},j=d(" \u76EE\u6807\u7B49\u7EA7"),z={class:"col"},F=d(" \u5BF9\u65B9\u94B1\u5305\u5730\u5740"),G={class:"col"},J={class:"row"},K={class:"col"},O=d(" \u4E2D\u5956\u7387"),Q={class:"col"};function X(o,t,u,a,e,r){return w(),v("div",k,[s("div",b,[s("div",y,[s("div",P,"\u71C3\u70E7 "+n(e.site.burnTokens),1),s("div",g,"\u8F6C\u5165 "+n(e.site.business),1),s("div",V,"\u4EBA\u6570 "+n(e.site.populations),1),s("div",x,"\u53C2\u4E0E\u6B21\u6570 "+n(e.site.times),1),s("div",T,"\u4E2D\u5956\u6B21\u6570 "+n(e.site.won),1),s("div",C,"\u63D0\u73B0 "+n(e.site.withdrawn),1),s("div",U,"\u77FF\u673A\u6570\u91CF "+n(e.site.machines),1)]),s("div",W,[s("div",B,"\u77FF\u673A\u4EA7\u91CF/\u5929 "+n(e.site.machinePowerPercent/10)+"% ",1),s("div",L,"\u4E2D\u5956\u673A\u7387 "+n(e.site.luckyPercent)+"% ",1)])]),s("div",R,[s("div",S,[s("button",{class:"",onClick:t[0]||(t[0]=(...i)=>o.showSite&&o.showSite(...i))},"\u66F4\u65B0\u5408\u7EA6\u53C2\u6570\u914D\u7F6E")])]),s("div",q,[s("div",D,[I,l(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=i=>e.form.amount=i)},null,512),[[c,e.form.amount]])]),s("div",N,[A,l(s("input",{type:"text",maxlength:"42","onUpdate:modelValue":t[2]||(t[2]=i=>e.form.to=i)},null,512),[[c,e.form.to]])]),s("div",E,[s("button",{class:"primary",onClick:t[3]||(t[3]=(...i)=>r.transfer&&r.transfer(...i))},"\u8F6C\u8D26")])]),s("div",H,[s("div",M,[j,l(s("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=i=>e.form.rank=i)},null,512),[[c,e.form.rank]])]),s("div",z,[F,l(s("input",{type:"text",maxlength:"42","onUpdate:modelValue":t[5]||(t[5]=i=>e.form.to=i)},null,512),[[c,e.form.to]])]),s("div",G,[s("button",{class:"primary",onClick:t[6]||(t[6]=(...i)=>r.setRank&&r.setRank(...i))},"\u8BBE\u7F6E\u4F1A\u5458\u7B49\u7EA7V1-V6")])]),s("div",J,[s("div",K,[O,l(s("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=i=>e.form.luckyPercent=i)},null,512),[[c,e.form.luckyPercent]])]),s("div",Q,[s("button",{class:"",onClick:t[8]||(t[8]=(...i)=>r.setLucky&&r.setLucky(...i))},"\u8BBE\u7F6E\u4E2D\u5956\u7387")])])])}var $=_(p,[["render",X]]);export{$ as default};
