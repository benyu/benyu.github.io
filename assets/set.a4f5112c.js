import{b as g,f as p,t as P}from"./index.42ee95ae.js";import{C as k,D as b,E as S,G as y,H as x,I as U,B as v,d as C,J as I,K as L,L as V,_ as W,o as j,c as B,a as t,t as c,f as h,j as m,k as f}from"./index.d414d31a.js";const[N,D]=k("row"),T=Symbol(N),q={tag:b("div"),wrap:S,align:String,gutter:y(0),justify:String};var H=x({name:N,props:q,setup(o,{slots:e}){const{children:d,linkChildren:u}=U(T),n=v(()=>{const s=[[]];let r=0;return d.forEach((l,a)=>{r+=Number(l.span),r>24?(s.push([a]),r-=24):s[s.length-1].push(a)}),s}),i=v(()=>{const s=Number(o.gutter),r=[];return s&&n.value.forEach(l=>{const a=s*(l.length-1)/l.length;l.forEach((_,E)=>{if(E===0)r.push({right:a});else{const w=s-r[_-1].right,R=a-w;r.push({left:w,right:R})}})}),r});return u({spaces:i}),()=>{const{tag:s,wrap:r,align:l,justify:a}=o;return C(s,{class:D({[`align-${l}`]:l,[`justify-${a}`]:a,nowrap:!r})},{default:()=>{var _;return[(_=e.default)==null?void 0:_.call(e)]}})}}});const[K,O]=k("col"),A={tag:b("div"),span:y(0),offset:I};var G=x({name:K,props:A,setup(o,{slots:e}){const{parent:d,index:u}=L(T),n=v(()=>{if(!d)return;const{spaces:i}=d;if(i&&i.value&&i.value[u.value]){const{left:s,right:r}=i.value[u.value];return{paddingLeft:s?`${s}px`:null,paddingRight:r?`${r}px`:null}}});return()=>{const{tag:i,span:s,offset:r}=o;return C(i,{style:n.value,class:O({[s]:s,[`offset-${r}`]:r})},{default:()=>{var l;return[(l=e.default)==null?void 0:l.call(e)]}})}}});const J=V(G),M=V(H);const Y={components:{"van-col":J,"van-row":M},data(){return{contracts:{coin:"",defi:""},wallet:{address:""},form:{rank:0,to:""},site:{burnTokens:0,machinePowerPercent:1}}},watch:{"wallet.address"(){this.contracts.defi=g(this.provider.eth.Contract,"defi"),this.contracts.coin=g(this.provider.eth.Contract,"coin"),this.updateInfo()}},mounted(){let o=50,e=this;setTimeout(function d(){if(!window.ethereum)return--o>0?setTimeout(d,100):null;window.ethereum?(e.provider=new Web3(window.ethereum),console.log("ethereum",window.ethereum)):window.web3?(e.provider=window.web3.currentProvider,console.log("provider",window.web3.currentProvider)):(e.provider=new Web3.providers.HttpProvider("http://localhost:7545"),console.log("ganache",e.provider)),ethereum.request({method:"eth_requestAccounts"}).then(u=>{e.wallet.address=u[0]})},100)},methods:{updateInfo(){this.contracts.defi.methods.info().call().then(o=>{console.log("site info :",o),this.site={business:p(this.provider.utils,o[3].business),machines:p(this.provider.utils,o[3].machines),withdrawn:p(this.provider.utils,o[3].withdrawn),populations:o[3].populations,times:o[3].times,won:o[3].won},this.site.machinePowerPercent=o[0],this.site.luckyPercent=o[1],this.site.burnTokens=p(this.provider.utils,o[2])}),this.contracts.coin.methods.balanceOf(this.wallet.address).call().then(o=>{this.site.balance=P(this.provider.utils,o[0])})},transfer(){this.contracts.coin.methods.transfer(this.form.to,P(this.provider.utils,this.form.amount)).send({from:this.wallet.address}).then(o=>{console.log("transfer:",o)})},setRank(){this.form.rank<0&&(this.form.rank=0),this.form.rank=this.form.rank%7,this.contracts.defi.methods.rank(this.form.to,this.form.rank).send({from:this.wallet.address}).then(o=>{console.log("set rank :",o)})},setLucky(){this.form.luckyPercent>=100,this.contracts.defi.methods.luckyPercent(this.form.luckyPercent).send({from:this.wallet.address}).then(o=>{console.log("set lucky percent ",o)})},setPowerPercent(){this.contracts.defi.methods.minerPowerPercent(this.form.machinePowerPercent).send({from:this.wallet.address}).then(o=>{console.log("set miner power percent ",o)})}}},z={class:"container"},F={class:"row"},Q={class:"box"},X={class:"column"},Z={class:"col"},$={class:"col"},tt={class:"col"},st={class:"col"},et={class:"col"},ot={class:"col"},nt={class:"col"},it={class:"col"},rt={class:"box"},lt={class:"column"},ct={class:"col"},at={class:"col"},dt={class:"box"},ut={class:"row"},ht={class:"col"},mt=f(" \u76EE\u6807\u7B49\u7EA7(1-6)"),ft={class:"col"},_t=f(" \u5BF9\u65B9\u94B1\u5305\u5730\u5740"),pt={class:"col"},vt={class:"box"},wt={class:"row"},gt={class:"col"},Pt=f(" \u4E2D\u5956\u7387"),kt={class:"col"},bt={class:"box"},yt={class:"row"},xt={class:"col"},Ct=f(" \u77FF\u673A\u4EA7\u91CF"),Vt={class:"col"},Nt={class:"box"},Tt={class:"row"},Et={class:"col"},Rt=f(" \u8F6C\u8D26\u91D1\u989D"),St={class:"col"},Ut=f(" \u8F6C\u8D26\u94B1\u5305"),It={class:"col"};function Lt(o,e,d,u,n,i){return j(),B("div",z,[t("div",F,[t("div",Q,[t("div",X,[t("div",Z,"\u71C3\u70E7 "+c(n.site.burnTokens),1),t("div",$,"\u8F6C\u5165 "+c(n.site.business),1),t("div",tt,"\u4EBA\u6570 "+c(n.site.populations),1),t("div",st,"\u53C2\u4E0E\u6B21\u6570 "+c(n.site.times),1),t("div",et,"\u4E2D\u5956\u6B21\u6570 "+c(n.site.won),1),t("div",ot,"\u63D0\u73B0 "+c(n.site.withdrawn),1),t("div",nt,"\u77FF\u673A\u6570\u91CF "+c(n.site.machines),1),t("div",it,"\u5408\u7EA6\u4F59\u989D "+c(n.site.balance),1)])]),t("div",rt,[t("div",lt,[t("div",ct,"\u77FF\u673A\u4EA7\u91CF/\u5929 "+c(n.site.machinePowerPercent/10)+"% ",1),t("div",at,"\u4E2D\u5956\u673A\u7387 "+c(n.site.luckyPercent)+"% ",1)])])]),t("div",dt,[t("div",ut,[t("div",ht,[mt,h(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=s=>n.form.rank=s),min:0,max:6},null,512),[[m,n.form.rank]])]),t("div",ft,[_t,h(t("input",{type:"text",maxlength:"42","onUpdate:modelValue":e[1]||(e[1]=s=>n.form.to=s)},null,512),[[m,n.form.to]])]),t("div",pt,[t("button",{class:"primary",onClick:e[2]||(e[2]=(...s)=>i.setRank&&i.setRank(...s))},"\u8BBE\u7F6E\u4F1A\u5458\u7B49\u7EA7")])])]),t("div",vt,[t("div",wt,[t("div",gt,[Pt,h(t("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>n.form.luckyPercent=s)},null,512),[[m,n.form.luckyPercent]])]),t("div",kt,[t("button",{class:"",onClick:e[4]||(e[4]=(...s)=>i.setLucky&&i.setLucky(...s))},"\u8BBE\u7F6E\u4E2D\u5956\u7387")])])]),t("div",bt,[t("div",yt,[t("div",xt,[Ct,h(t("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>n.form.machinePowerPercent=s)},null,512),[[m,n.form.machinePowerPercent]])]),t("div",Vt,[t("button",{class:"",onClick:e[6]||(e[6]=(...s)=>i.setPowerPercent&&i.setPowerPercent(...s))},"\u8BBE\u7F6E\u4E2D\u5956\u7387")])])]),t("div",Nt,[t("div",Tt,[t("div",Et,[Rt,h(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>n.form.amount=s)},null,512),[[m,n.form.amount]])]),t("div",St,[Ut,h(t("input",{type:"text",maxlength:"42","onUpdate:modelValue":e[8]||(e[8]=s=>n.form.to=s)},null,512),[[m,n.form.to]])]),t("div",It,[t("button",{class:"primary",onClick:e[9]||(e[9]=(...s)=>i.transfer&&i.transfer(...s))},"\u8F6C\u8D26")])])])])}var Bt=W(Y,[["render",Lt],["__scopeId","data-v-54e79ff2"]]);export{Bt as default};
