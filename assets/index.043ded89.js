import{b as P,f as u,a as R,t as O}from"./index.dacc6b91.js";import{_ as V,u as A,T as f,r as k,o as _,c as v,a as e,t as i,b as B,d as T,w,e as E,f as F,v as N,p as q,g as H,F as W,h as G,i as J,j as K,k as S}from"./index.f414fd76.js";import{g as I,n as Q,S as X,a as Y}from"./swiper.min.529b436e.js";function Z(t){let{swiper:s,extendParams:b,on:c,emit:o}=t,n;s.autoplay={running:!1,paused:!1},b({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function d(){const r=s.slides.eq(s.activeIndex);let m=s.params.autoplay.delay;r.attr("data-swiper-autoplay")&&(m=r.attr("data-swiper-autoplay")||s.params.autoplay.delay),clearTimeout(n),n=Q(()=>{let h;s.params.autoplay.reverseDirection?s.params.loop?(s.loopFix(),h=s.slidePrev(s.params.speed,!0,!0),o("autoplay")):s.isBeginning?s.params.autoplay.stopOnLastSlide?p():(h=s.slideTo(s.slides.length-1,s.params.speed,!0,!0),o("autoplay")):(h=s.slidePrev(s.params.speed,!0,!0),o("autoplay")):s.params.loop?(s.loopFix(),h=s.slideNext(s.params.speed,!0,!0),o("autoplay")):s.isEnd?s.params.autoplay.stopOnLastSlide?p():(h=s.slideTo(0,s.params.speed,!0,!0),o("autoplay")):(h=s.slideNext(s.params.speed,!0,!0),o("autoplay")),(s.params.cssMode&&s.autoplay.running||h===!1)&&d()},m)}function g(){return typeof n!="undefined"||s.autoplay.running?!1:(s.autoplay.running=!0,o("autoplayStart"),d(),!0)}function p(){return!s.autoplay.running||typeof n=="undefined"?!1:(n&&(clearTimeout(n),n=void 0),s.autoplay.running=!1,o("autoplayStop"),!0)}function a(r){!s.autoplay.running||s.autoplay.paused||(n&&clearTimeout(n),s.autoplay.paused=!0,r===0||!s.params.autoplay.waitForTransition?(s.autoplay.paused=!1,d()):["transitionend","webkitTransitionEnd"].forEach(m=>{s.$wrapperEl[0].addEventListener(m,y)}))}function x(){const r=I();r.visibilityState==="hidden"&&s.autoplay.running&&a(),r.visibilityState==="visible"&&s.autoplay.paused&&(d(),s.autoplay.paused=!1)}function y(r){!s||s.destroyed||!s.$wrapperEl||r.target===s.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(m=>{s.$wrapperEl[0].removeEventListener(m,y)}),s.autoplay.paused=!1,s.autoplay.running?d():p())}function C(){s.params.autoplay.disableOnInteraction?p():(o("autoplayPause"),a()),["transitionend","webkitTransitionEnd"].forEach(r=>{s.$wrapperEl[0].removeEventListener(r,y)})}function L(){s.params.autoplay.disableOnInteraction||(s.autoplay.paused=!1,o("autoplayResume"),d())}function D(){s.params.autoplay.pauseOnMouseEnter&&(s.$el.on("mouseenter",C),s.$el.on("mouseleave",L))}function z(){s.$el.off("mouseenter",C),s.$el.off("mouseleave",L)}c("init",()=>{s.params.autoplay.enabled&&(g(),I().addEventListener("visibilitychange",x),D())}),c("beforeTransitionStart",(r,m,h)=>{s.autoplay.running&&(h||!s.params.autoplay.disableOnInteraction?s.autoplay.pause(m):p())}),c("sliderFirstMove",()=>{s.autoplay.running&&(s.params.autoplay.disableOnInteraction?p():a())}),c("touchEnd",()=>{s.params.cssMode&&s.autoplay.paused&&!s.params.autoplay.disableOnInteraction&&d()}),c("destroy",()=>{z(),s.autoplay.running&&p(),I().removeEventListener("visibilitychange",x)}),Object.assign(s.autoplay,{pause:a,run:d,start:g,stop:p})}var U="/images/en.png",j="/images/zh.png",$="/images/homebg.gif",ee="/images/front.png",se="/images/bao_block.png",te="/images/zuzhi.png";const M=[[1520,6.25],[760,12.5],[506,18.75],[380,25],[304,31.25],[253,37.5],[217,43.7],[190,50],[168,56.25],[152,62.26],[138,68.75],[126,75],[116,81.25],[108,87.5],[101,93.75]],oe=["\u6241\u5934\u54C8\u90A3\u9CA8","\u5927\u767D\u9CA8","\u7070\u9CAD\u9CA8","\u725B\u5934\u9CA8","\u89D2\u9CA8","\u864E\u9CA8","\u53CC\u9AFB\u9CA8","\u9ED1\u9CCD\u7901\u9CA8","\u661F\u9CA8","\u82B1\u6591\u9CA8","\u6A21\u62C9\u91CC\u4E4C\u9CA8","\u952F\u9CA8","\u65E5\u672C\u6241\u9CA8","\u76B1\u9CC3\u9CA8","\u952F\u5C3E\u9CA8","\u5C16\u5C3E\u9CA8"],ie={components:{Swiper:X,SwiperSlide:Y},setup(){const{locale:t}=A();return{locale:t}},data(){return{lang:"zh",provider:null,betUI:!1,betResult:!1,banner:["/images/ban11.jpg","/images/ban21.jpg","/images/ban31.jpg"],modules:[Z],contracts:{coin:"",defi:""},game:{min:1,max:1e3,rate:1,lucky:10,decimals:8,species:"",hash:"",code:""},refer:"0x906921df1608bCFc3b9a1D99667682fAA44f3a47",wallet:{address:"",approved:0},user:{},form:{amount:1,boxes:1,to:"",rank:0,luckyPercent:40},lottery:{},site:{burnTokens:0,machinePowerPercent:1}}},watch:{"wallet.address"(){this.contracts.coin=P(this.provider.eth.Contract,"coin"),this.contracts.defi=P(this.provider.eth.Contract,"defi"),this.updateInfo()}},mounted(){let t=50,s=this;setTimeout(function b(){if(!window.ethereum)return--t>0?setTimeout(b,100):null;window.ethereum?(s.provider=new Web3(window.ethereum),console.log("ethereum",window.ethereum)):window.web3?(s.provider=window.web3.currentProvider,console.log("provider",window.web3.currentProvider)):(s.provider=new Web3.providers.HttpProvider("http://localhost:7545"),console.log("ganache",s.provider)),ethereum.request({method:"eth_requestAccounts"}).then(c=>{console.log(c);let o=s.$route.query.a;o&&o.length==42&&(console.log("set refer to: ",o),s.refer=o),s.wallet.address=c[0]})},100)},methods:{updateInfo(){this.contracts.coin.methods.balanceOf(this.wallet.address).call().then(t=>{console.log(t),this.wallet.balance=u(this.provider.utils,t)}),this.contracts.coin.methods.allowance(this.wallet.address,R.defi).call().then(t=>{console.log("approved:",t),this.wallet.approved=t>this.game.min}),this.contracts.defi.methods.user(this.wallet.address).call().then(t=>{console.log(t),this.lottery={amount:t.last.amount,flag:t.last.flag,rate:t.last.rate},this.user={refer:t.refer,members:t.members,rank:t.rank,shares:t.shares,times:t.times,won:t.won,withdrawTime:t.withdrawTime},this.user.cost=u(this.provider.utils,t.cost),this.user.balance=u(this.provider.utils,t.balance),this.user.business=u(this.provider.utils,t.business),this.user.machines=u(this.provider.utils,t.machines),this.user.capacity=u(this.provider.utils,t.capacity),this.user.shareTokens=u(this.provider.utils,t.shareTokens),this.user.rankTokens=u(this.provider.utils,t.rankTokens),this.user.mineTokens=u(this.provider.utils,t.mineTokens),this.user.lotteryTokens=u(this.provider.utils,t.lotteryTokens),this.user.withdraw=u(this.provider.utils,t.withdraw),this.lottery.amount=u(this.provider.utils,this.lottery.amount),t.machines>0&&(this.user.machinesPower=parseFloat((new Date().getTime()/1e3-t.withdrawTime)/86400*this.user.machines*this.site.machinePowerPercent/1e3).toFixed(4),this.user.balance+=this.user.machinesPower)}).catch(t=>{console.error("defi user ",t)})},bet(){if(this.form.amount>this.wallet.balance){console.log(this.form.amount>this.wallet.balance),f.fail("\u94B1\u5305\u4F59\u989D\u4E0D\u8DB3");return}if(this.form.amount<this.game.min){console.log(this.form.amount<this.game.min),f.fail("\u6295\u6CE8\u91D1\u989D\u4E0D\u5C11\u4E8E"+this.game.min);return}if(this.form.amount>this.game.max){console.log(this.form.amount>this.game.max),f.fail("\u6295\u6CE8\u91D1\u989D\u4E0D\u8D85\u8FC7"+this.game.max);return}f.loading({forbidClick:!0,message:"\u6B63\u5728\u5904\u7406"}),this.contracts.defi.methods.bet(this.refer,O(this.provider.utils,this.form.amount),this.form.boxes).send({from:this.wallet.address,gasLimit:35e5}).then(t=>{console.log(t),this.game.hash=t.blockHash,this.game.code=t.blockHash[t.blockHash.length-1],this.game.species=oe[parseInt(this.game.code,16)],this.updateInfo(),this.dialogVisible=!0,this.betUI=!1,this.betResult=!0,f.clear()}).catch(t=>{console.error(t),f.clear()})},showSite(){this.contracts.defi.methods.info().call().then(t=>{console.log("site info :",t),this.site.machinePowerPercent=t[0],this.site.burnTokens=u(this.provider.utils,t[2])})},approve(){this.contracts.coin.methods.approve(this.address.defi,O(this.provider.utils,"990000000000000000000")).send({from:this.wallet.address}).then(t=>{console.log("approve :",t),this.updateInfo()})},withdraw(){this.contracts.defi.methods.withdraw().send({from:this.wallet.address}).then(t=>{console.log("withdrawn ",t),this.updateInfo()})},add(){this.form.amount>=this.game.max||(this.form.amount*=2)},sub(){this.form.amount<=this.game.min||(this.form.amount/=2)},box(t){this.form.boxes++,this.form.boxes=this.form.boxes%16,this.game.rate=M[this.form.boxes-1][0]/100,this.game.lucky=M[this.form.boxes-1][1]},openBox(){console.log(this.form.boxes),this.$router.push({name:"box",query:{hash:this.game.code,boxes:this.form.boxes}})},copyShareLink(){this.$copyText(`${window.location.origin}/#/?a=${this.wallet.address}`).then(function(t){f.success("\u62F7\u8D1D\u6210\u529F")},function(t){f.fail("\u62F7\u8D1D\u5931\u8D25")})},clickLang(t){this.lang=t,this.locale=t}}},l=t=>(q("data-v-545c14f4"),t=t(),H(),t),ae={class:""},ne={class:"header"},le={class:"header__wrap"},re={class:"header__left"},ue={class:"header__label"},de={class:"header__value lang"},pe={key:0,class:"lang_value"},ce=l(()=>e("img",{src:U},null,-1)),he=l(()=>e("span",null,"English",-1)),me=[ce,he],fe={key:1,class:"lang_value"},_e=l(()=>e("img",{src:j},null,-1)),ve=l(()=>e("span",null,"\u4E2D\u56FD",-1)),be=[_e,ve],ge={href:"javascript:void(false)"},we=l(()=>e("img",{src:U},null,-1)),ye=S(" English"),ke=[we,ye],Te={href:"javascript:void(false)"},Ee=l(()=>e("img",{src:j},null,-1)),Ie=S(" \u4E2D\u56FD"),Se=[Ee,Ie],xe={class:"long longbefore"},Ce={class:"home-box"},Le={class:"prizeList"},Pe=["src"],Oe=l(()=>e("div",{class:"drawimg"},[e("img",{src:$,class:"flash"}),e("img",{src:ee,class:"sea"})],-1)),Be={class:"abc"},Fe={class:"section"},Me={class:"container"},Ue={class:"statistics"},je={class:"panel-info"},De={class:"boderboot"},ze=l(()=>e("img",{src:se,alt:""},null,-1)),Re={class:"panel-info-item"},Ve={class:"ether-value"},Ae={class:"panel-info-item"},Ne={class:"ether-value"},qe={class:"panel-info-item"},He={class:"ether-value"},We={class:"panel-info-item"},Ge={class:"ether-value"},Je={class:"panel-info-item"},Ke={class:"ether-value"},Qe={class:"panel-info-item"},Xe={class:"ether-value"},Ye={class:"panel-info-item"},Ze={class:"ether-value"},$e={class:"panel-info-item"},es={class:"ether-value"},ss={class:"panel-info-item"},ts={class:"ether-value"},os={class:"panel-info-item"},is={class:"ether-value"},as={class:"panel-info-item"},ns={class:"ether-value"},ls={class:"panel-info-item"},rs=l(()=>e("span",null,null,-1)),us=["disabled"],ds={class:"panel-info"},ps=l(()=>e("img",{src:te,alt:""},null,-1)),cs={class:"body"},hs={class:"panel-info-item"},ms={class:"ether-value"},fs={class:"panel-info-item"},_s={class:"ether-value"},vs={class:"panel-info-item"},bs={class:"ether-value"},gs={class:"panel-info-item"},ws={class:"ether-value"},ys={class:"panel-info-item"},ks={class:"ether-value"},Ts={class:"panel-info-item"},Es={class:"ether-value"},Is={class:"panel-info-item"},Ss={class:"ether-value"},xs={class:"panel-info-item"},Cs={class:"btn"},Ls={class:"betBotm"},Ps=l(()=>e("div",{class:"bet-font"},"\u6295\u6CE8\u91D1\u984D",-1)),Os={class:"int-box"},Bs=l(()=>e("div",{class:"god-bi"},"SEA",-1)),Fs={class:"btnlist"},Ms={class:"betInfo"},Us=S(" \u53C3\u8003\u50F9\u683C\uFF1A "),js={class:"font14"},Ds={class:"font14"},zs={class:"font14"},Rs={class:"font14"},Vs={class:"openBtn clickableButton"},As={class:"resultbox"},Ns=l(()=>e("div",{class:"reuslt-title"},"\u76EE\u6A19\u5C0D\u8C61",-1)),qs={class:"number-box"},Hs=["src"],Ws=l(()=>e("div",{class:"reuslt-title"},"\u54C8\u5E0C\u5C3E\u6578",-1)),Gs={class:"number-box"},Js=l(()=>e("div",{class:"reuslt-title"},"\u4EA4\u6613\u54C8\u5E0C\u5730\u5740",-1)),Ks={class:"number-box"};function Qs(t,s,b,c,o,n){const d=k("swiper-slide"),g=k("swiper"),p=k("van-popup");return _(),v("div",ae,[e("div",ne,[e("div",le,[e("div",re,[e("div",ue,i(t.$t("app.label1")),1),e("div",de,[o.lang=="en"?(_(),v("div",pe,me)):B("",!0),o.lang=="zh"?(_(),v("div",fe,be)):B("",!0),e("ul",null,[e("a",ge,[e("li",{onClick:s[0]||(s[0]=a=>n.clickLang("en"))},ke)]),e("a",Te,[e("li",{onClick:s[1]||(s[1]=a=>n.clickLang("zh"))},Se)])])])])])]),e("div",xe,[e("div",Ce,[e("div",Le,[T(g,{modules:o.modules,autoplay:{delay:2500,disableOnInteraction:!1},"slides-per-view":1},{default:w(()=>[(_(!0),v(W,null,G(o.banner,a=>(_(),J(d,{key:a},{default:w(()=>[e("img",{src:a,class:"banner"},null,8,Pe)]),_:2},1024))),128))]),_:1},8,["modules"])]),Oe,o.wallet.approved?(_(),v("div",{key:1,class:"longBtn",onClick:[s[4]||(s[4]=a=>o.betUI=!0),s[5]||(s[5]=E(()=>{},["stop"]))]},i(t.$t("app.label50")),1)):(_(),v("div",{key:0,class:"longBtn",onClick:[s[2]||(s[2]=(...a)=>n.approve&&n.approve(...a)),s[3]||(s[3]=E(()=>{},["stop"]))]},i(t.$t("app.label51")),1)),e("h4",Be,i(t.$t("app.label54"))+": "+i(o.wallet.balance)+" SEA",1)]),e("section",Fe,[e("div",Me,[e("h2",Ue,i(t.$t("app.label30")),1),e("div",je,[e("h3",De,[ze,e("span",null,i(t.$t("app.label9")),1)]),e("div",null,[e("div",Re,[e("span",null,i(t.$t("app.label1911")),1),e("span",Ve,i(o.site.burnTokens),1)]),e("div",Ae,[e("span",null,i(t.$t("app.label193")),1),e("span",Ne,i(o.user.cost),1)]),e("div",qe,[e("span",null,i(t.$t("app.label191")),1),e("span",He,i(o.user.machines),1)]),e("div",We,[e("span",null,i(t.$t("app.label192")),1),e("span",Ge,i(o.user.capacity),1)]),e("div",Je,[e("span",null,i(t.$t("app.label201")),1),e("span",Ke,i(o.user.shareTokens),1)]),e("div",Qe,[e("span",null,i(t.$t("app.label21")),1),e("span",Xe,i(o.user.mineTokens),1)]),e("div",Ye,[e("span",null,i(t.$t("app.label20")),1),e("span",Ze,i(o.user.machinesPower),1)]),e("div",$e,[e("span",null,i(t.$t("app.label221")),1),e("span",es,i(o.lottery&&o.lottery.flag?o.lottery.amount*o.lottery.rate:"-"),1)]),e("div",ss,[e("span",null,i(t.$t("app.label231")),1),e("span",ts,i(o.user.lotteryTokens),1)]),e("div",os,[e("span",null,i(t.$t("app.label24")),1),e("span",is,i(o.user.withdraw),1)]),e("div",as,[e("span",null,i(t.$t("app.label25")),1),e("span",ns,i(parseFloat(o.user.balance).toFixed(2)),1)]),e("div",ls,[rs,e("a",{class:"btn withdraw",onClick:s[6]||(s[6]=(...a)=>n.withdraw&&n.withdraw(...a)),disabled:o.user.balance<=1},i(t.$t("app.label29")),9,us)])])]),e("div",ds,[e("h3",null,[ps,e("span",null,i(t.$t("app.label33")),1)]),e("div",cs,[e("div",hs,[e("span",null,i(t.$t("app.label17")),1),e("span",ms,i(o.user.refer?o.user.refer.substr(0,8)=="0x000000"?"-":[o.user.refer.substr(0,4),"****",o.user.refer.substr(-5,5)].join(""):"-"),1)]),e("div",fs,[e("span",null,i(t.$t("app.label344")),1),e("span",_s,i(o.user.rank),1)]),e("div",vs,[e("span",null,i(t.$t("app.label36")),1),e("span",bs,i(o.user.shares),1)]),e("div",gs,[e("span",null,i(t.$t("app.label37")),1),e("span",ws,i(o.user.groups),1)]),e("div",ys,[e("span",null,i(t.$t("app.label22")),1),e("span",ks,i(o.user.shareTokens),1)]),e("div",Ts,[e("span",null,i(t.$t("app.label23")),1),e("span",Es,i(o.user.rankTokens),1)]),e("div",Is,[e("span",null,i(t.$t("app.label38")),1),e("span",Ss,i(o.user.business),1)]),e("div",xs,[e("span",null,i(t.$t("app.label34")),1),e("span",Cs,[e("div",{onClick:s[7]||(s[7]=(...a)=>n.copyShareLink&&n.copyShareLink(...a)),class:"aligncenter copybtn"},i(t.$t("app.label40")),1)])])])])])]),F(e("div",Ls,[T(p,{show:o.betUI,"onUpdate:show":s[15]||(s[15]=a=>o.betUI=a),onClick:s[16]||(s[16]=a=>o.betUI=!1),style:{"background-color":"transparent"}},{default:w(()=>[e("div",{class:"bet-img",onClick:s[14]||(s[14]=E(()=>{},["stop"]))},[Ps,e("div",Os,[F(e("input",{type:"number",placeholder:"\u8ACB\u8F38\u5165\u91D1\u984D","onUpdate:modelValue":s[8]||(s[8]=a=>o.form.amount=a)},null,512),[[K,o.form.amount]]),Bs]),e("div",Fs,[e("div",{class:"btn-item",onClick:s[9]||(s[9]=(...a)=>n.sub&&n.sub(...a))}," - "),e("div",{class:"btn-item",onClick:s[10]||(s[10]=(...a)=>n.add&&n.add(...a))}," + "),e("div",{class:"btn-item",onClick:s[11]||(s[11]=(...a)=>t.max&&t.max(...a))},"max"),e("div",{class:"btn-item",onClick:s[12]||(s[12]=(...a)=>n.box&&n.box(...a))},i(o.form.boxes),1)]),e("div",Ms,[e("div",null,[Us,e("span",js,i(o.form.amount*2.5)+" USDT",1)]),e("div",null,[e("span",Ds,"\u8CFC\u8CB7\u500B\u6578: "+i(o.form.boxes),1),e("span",zs,"\u500D\u6578: "+i(o.game.rate),1),e("span",Rs,"\u52DD\u7387: "+i(o.game.lucky)+" %",1)])]),e("div",Vs,[e("span",{class:"font14",onClick:s[13]||(s[13]=(...a)=>n.bet&&n.bet(...a))},"\u78BA\u5B9A\u8CFC\u8CB7")])])]),_:1},8,["show"])],512),[[N,o.betUI]]),e("div",{onClick:s[19]||(s[19]=a=>o.betResult=!1),class:"Betresult"},[T(p,{show:o.betResult,"onUpdate:show":s[18]||(s[18]=a=>o.betResult=a)},{default:w(()=>[e("div",As,[Ns,e("div",qs,[e("img",{src:"/images/"+o.game.code+".png"},null,8,Hs),e("div",null,i(o.game.species),1)]),Ws,e("div",Gs,"\u54C8\u5E0C\u5C3E\u6578\u70BA "+i(o.game.code),1),Js,e("div",Ks,i(o.game.hash),1),e("div",{class:"Openbtn",onClick:s[17]||(s[17]=(...a)=>n.openBox&&n.openBox(...a))},"\u6211\u8981\u62BD\u734E")])]),_:1},8,["show"])])])])}var $s=V(ie,[["render",Qs],["__scopeId","data-v-545c14f4"]]);export{$s as default};
